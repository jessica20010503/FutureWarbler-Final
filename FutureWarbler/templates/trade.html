{% extends 'layout.html'%}
{% load static %}
{% block content %}
<div class="wrap d-flex m0-a">
    <div class="side">
        <h1 class="fz-xl fwb">F<span class="bright">u</span>tures <br> &nbsp;&nbsp;Warbl<span class="bright">e</span>r
        </h1>
        <ul class="menu">
            <li class=" main--menu pt-3 pr-5 pb-3 pl-9  "><a href="/index/"><i class="fas fa-home mr-2"></i>首頁</a></li>
            <li class="main--menu pt-3 pr-5 pb-3 pl-9  chosed"><a href="/trade"><i
                        class="fas fa-university mr-2"></i>模擬交易所</a></li>
            <li class="drop--menu">
                <a href="" class="main--menu pt-3 pb-3 pl-9  ">
                    <i class="fas fa-chalkboard-teacher mr-2"></i>期貨小教室<i class="fas fa-chevron-down ml-7 fz-s"></i>
                </a>
                <ul class=" d-none">
                    <li class="sub--menu"><a href="/class/">期貨基本介紹</a></li>
                    <li class="sub--menu"><a href="/index-class/">期貨指標介紹</a></li>
                </ul>
            </li>
            <li class="drop--menu">
                <a href="" class="main--menu pt-3 pb-3 pl-9">
                    <i class="fas fa-robot mr-2"></i>智能機器人顧問<i class="fas fa-chevron-down ml-1 fz-s"></i>
                </a>
                <ul class=" d-none">
                    <li class="sub--menu"><a href="/robot-normal/">交易策略</a></li>
                    <li class="sub--menu"><a href="/robot-intelligent/">智能交易策略</a></li>
                </ul>
            </li>
            <li class="main--menu pt-3 pr-5 pb-3 pl-9  "><a href="/news/?category=0"><i
                        class="fas fa-newspaper mr-2"></i>新聞</a></li>
            <li class="main--menu pt-3 pr-5 pb-3 pl-9  "><a href="/personal/"><i
                        class="fas fa-user-alt mr-2"></i>個人頁面</a></li>
        </ul>
        <div class="circle"></div>
        <div class="circle2"></div>
        <div class="circle3"></div>
    </div>
    <div class="container pb-4">
        {% include 'login-nav.html' %}
        <ul class="trade__content w-100 mt-7  pl-12 pr-10 b-4 ">
            <li class="fl white-bg w-65 mr-4pct br-m  card-shadow ">
                <div class="d-flex jcsb aic p-4 pl-8 pr-8 b-bottom ">
                    <h2 class="fz-xm fwbr"><i class="fas fa-list mr-3"></i>商品行情表</h2>
                </div>
                <div class="trade--productList p-2 h-40 w-100">
                    <table class="w-100 tac trade--table mb-4 ">
                        <tr class="fwb">
                            <th>序號</th>
                            <th>商品代號</th>
                            <th>商品名稱</th>
                            <th>月</th>
                            <th>漲跌</th>
                            <th>漲跌幅</th>
                            <th>時間</th>
                        </tr>
                        <tr class="trade--table__item">
                            <td>1</td>
                            <td>TX</td>
                            <td>台指期</td>
                            <td>3月</td>
                            <td>+2.14</td>
                            <td>+4.13</td>
                            <td>2021/12/29 20:22</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>2</td>
                            <td>MTX</td>
                            <td>小台指期</td>
                            <td>3月</td>
                            <td>+1.58</td>
                            <td>+5.33</td>
                            <td>2021/12/15 13:18</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>3</td>
                            <td>TE</td>
                            <td>電子期</td>
                            <td>3月</td>
                            <td>-4.22</td>
                            <td>-5.31</td>
                            <td>2021/12/07 08:55</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>4</td>
                            <td>TF</td>
                            <td>金融期</td>
                            <td>3月</td>
                            <td>+3.12</td>
                            <td>+2.47</td>
                            <td>2021/12/01 15:17</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>5</td>
                            <td>YM</td>
                            <td>小道瓊</td>
                            <td>3月</td>
                            <td>-1.34</td>
                            <td>-5.22</td>
                            <td>2021/11/29 18:22</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>6</td>
                            <td>NQ</td>
                            <td>小那斯達克</td>
                            <td>3月</td>
                            <td>+2.63</td>
                            <td>+1.34</td>
                            <td>2021/11/25 02:32</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>7</td>
                            <td>ES</td>
                            <td>小S&P</td>
                            <td>3月</td>
                            <td>+3.28</td>
                            <td>+2.52</td>
                            <td>2021/11/14 17:15</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>8</td>
                            <td>RTY</td>
                            <td>小羅素2000</td>
                            <td>3月</td>
                            <td>+7.24</td>
                            <td>+3.71</td>
                            <td>2021/11/05 09:07</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>9</td>
                            <td>TY</td>
                            <td>美國十年公債</td>
                            <td>3月</td>
                            <td>+1.32</td>
                            <td>+8.21</td>
                            <td>2021/10/31 14:51</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>10</td>
                            <td>S</td>
                            <td>黃豆</td>
                            <td>3月</td>
                            <td>-6.13</td>
                            <td>-2.42</td>
                            <td>2021/10/25 19:22</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>11</td>
                            <td>W</td>
                            <td>小麥</td>
                            <td>3月</td>
                            <td>+2.13</td>
                            <td>+3.21</td>
                            <td>2021/10/12 18:31</td>
                        </tr>
                        <tr class="trade--table__item">
                            <td>12</td>
                            <td>C</td>
                            <td>玉米</td>
                            <td>3月</td>
                            <td>+1.87</td>
                            <td>+2.31</td>
                            <td>2021/10/11 15:12</td>
                        </tr>
                    </table>

                </div>
            </li>
            <li class="fl white-bg w-30  br-m  card-shadow p-2  orderMachine">
                <div class="d-flex jcsb aic p-4  pr-8 b-bottom ">
                    <h2 class="fz-xm fwbr"><i class="fas fa-cash-register mr-3 "></i>下單機</h2>
                </div>
                <form action="" class="w-100 p-2 pl-5 pr-3 pb-5">
                    <fieldset class="p-3 br-s">
                        <legend class="fwb ">組合設定</legend>
                        <div>
                            <input type="radio" name="question"  value="1" onclick="setgroup()"  checked>選項一 :
                            <div class="d-block ">
                                <label for="setgroup">我的策略清單 : </label>
                                <select name="product" class="w-48" id="setgroup">
                                   <option value="">TX_001</option>
                                   <option value="">TE_001</option>
                                </select>
                            </div>
                          </div>
                          <input type="radio" name="question" id="question" value="2" onclick="setgroup2()" class="mt-3">選項二 : 
                          <div class="d-block">
                            <label for="product">期貨商品：</label>
                              <select name="product" id="setgroup2" class="w-50">
                                <option value="TX">台指期</option>
                                <option value="MTX">小台指</option>
                                <option value="TE">電子期</option>
                                <option value="TF">金融期</option>
                                <option value="UDF">小道瓊</option>
                                <option value="NAS">小那斯達克</option>
                                <option value="S&P">小S&P</option>
                                <option value="RUT">小羅素2000</option>
                                <option value="US10">美國十年公債</option>
                                <option value="S">黃豆</option>
                                <option value="W">小麥</option>
                                <option value="C">玉米</option>
                              </select>
                          </div>
                          <div class="mt-2">
                            <label for="list1">多空設定：</label>
                            <select id="list1" class="w-30"></select>
                            <br>
                            <label for="list2">進場設定：</label>
                            <select id="list2" class="w-60 mt-3"></select>
                            <br>
                            <label for="list3">出場設定：</label>
                            <select id="list3" class="w-60 mt-3"></select>
                            <label for="fix">固定設定：
                                <select name="fix" id="fix" class="mt-3">
                                    <option value="4">固定購買一口</option>
                                    <option value="5">固定金額推薦</option>
                                    <option value="6">固定比例推薦</option>
                                </select>
                            <br>
                            <label for="stop">停損停利：</label>
                                <select name="stop" id="stop" class="mt-3 w-60">
                                    <option value="0">請選擇</option>
                                    <option value="1">百分比</option>
                                    <option value="2">固定式</option>
                                    <option value="3">移動式</option>
                                </select>
                                <div class="stop-content">
                                    <div class="b1 d-none">
                                        <label for="stop1">停損：</label><input type="number" class="w-30 mt-3" id="stop1"> %
                                        <br>
                                        <label for="stop2">停利：</label><input type="number" class="w-30 mt-3" id="stop2"> %
                                    </div>
                                    <div class="b2 d-none">
                                        <label for="stop1">停損：</label><input type="number" class="w-30 mt-3" id="stop1"> 點
                                        <br>
                                        <label for="stop2">停利：</label><input type="number" class="w-30 mt-3" id="stop2"> 點
                                    </div>
                                    <div class="b3 d-none">
                                        <label for="stop1">停損：</label><input type="number" class="w-30 mt-3" id="stop1"> 點
                                    </div>
                                </div>
                    </fieldset>
                    <div class="ml-4">
                        <p class="mt-2">單口價格 :&nbsp;&nbsp;<span class="fwbr fz-xm">18,0000</span> / 口</p>
                    </div>
                    <!-- Button trigger modal -->
                    <input type="button" value="下單" class="fr submit__btn dark-gray b-n mt-7 fwb" data-bs-toggle="modal"
                        data-bs-target="#exampleModalCenter">
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModalCenter" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header p-3">
                                    <h5 class="modal-title" id="exampleModalLabel"><i
                                            class="fas fa-cash-register mr-3  ml-5"></i>下單機</h5>
                                    <button type="button" class="b-n close__btn" data-bs-dismiss="modal"
                                        aria-label="Close"><i class="fas fa-times fz-s"></i></button>
                                </div>
                                <form action="">
                                    <div class="modal-body  p-4  gray-bg">
                                        <div class=" w-80 m0-a tac">
                                            <h2>已成功新增一筆持倉資料<br>請前往個人頁面查看</h2>
                                            <a href="/personal/"
                                                class="personal__btn dark-gray b-n fwb mt-3 d-inline-block">前往查看</a>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </form>
            </li>
            <li class="fl white-bg w-100 br-m  card-shadow mt-6 mr-4pct pb-6 ">
                <h2 class="fz-xm fwbr  p-4 pl-8 pr-8 b-bottom"><i class="fas fa-list mr-3"></i>看盤</h2>
                <div class="d-flex">

                </div>
                <form action="#" method="#" class="time-table d-flex jcsb  p-6">
                    <div class="w-20">
                        <h2 class="mb-4 fwb primary b-bottom pb-2">商品設定</h2>
                        <label for="product">期貨商品：
                            <select name="product" id="product" class="p-1 br-s w-48">
                                <option value="TX">台指期</option>
                                <option value="MTX">小台指</option>
                                <option value="TE">電子期</option>
                                <option value="TF">金融期</option>
                                <option value="UDF">小道瓊</option>
                                <option value="NAS">小那斯達克</option>
                                <option value="S&P">小S&P</option>
                                <option value="RUT">小羅素2000</option>
                                <option value="US10">美國十年公債</option>
                                <option value="S">黃豆</option>
                                <option value="W">小麥</option>
                                <option value="C">玉米</option>
                            </select>
                    </div>
                    <div class="w-25">
                        <h2 class="mb-4 fwb primary b-bottom pb-2">時間設定</h2>
                        <label for="cycle">資料週期：
                            <input type="number" name="number" id="cycle" class=" p-1 br-s w-20 mb-5">
                            <select id="cycle" name="cycle" class=" p-1 br-s w-25">
                                <option value="min">分鐘</option>
                                <option value="hr">小時</option>
                                <option value="day">天</option>
                            </select>
                            <br>
                            <label for="start-time">開始時間：</label>
                            <input id="start-time" name="start-time" type="date" class="p-1 br-s mb-5 ">
                            <br>
                            <label for="end-time">結束時間：</label>
                            <input id="end-time" name="end-time" type="date" class=" p-1 br-s ">
                    </div>
                    <div class="w-25">
                        <h2 class="mb-4 fwb primary b-bottom pb-2">副圖指標</h2>
                        <label for="index1">副圖指標1：</label>
                        <select id="index1" name="index" class="p-1 br-s w-75">
                            <option value="KD">KD指標</option>
                            <option value="BIAS">BIAS乖離率</option>
                            <option value="MACD">MACD指標</option>
                            <option value="Bollinger">布林通道</option>
                            <option value="WR">威廉指標</option>
                            <option value="WVAD">WVAD指標</option>
                            <option value="MA">MA指標</option>
                            <option value="DMI">DMI趨向指標</option>
                            <option value="EMA">EMA指數平均數指標</option>
                        </select>
                        <br>
                        <label for="index2">副圖指標2：</label>
                        <select id="index2" name="index" class="p-1 br-s w-75">
                            <option value="KD">KD指標</option>
                            <option value="BIAS">BIAS乖離率</option>
                            <option value="MACD">MACD指標</option>
                            <option value="Bollinger">布林通道</option>
                            <option value="WR">威廉指標</option>
                            <option value="WVAD">WVAD指標</option>
                            <option value="MA">MA指標</option>
                            <option value="DMI">DMI趨向指標</option>
                            <option value="EMA">EMA指數平均數指標</option>
                        </select>
                    </div>
                    <div>
                        <input type="button" value="確認送出" class="fr submit__btn dark-gray b-n  fwb d-inline-block">

                    </div>

                </form>


                <!-- TradingView Widget BEGIN -->
                <div class="tradingview-widget-container mt-5">
                    <div id="tradingview_390a9"></div>
                    <div class="tradingview-widget-copyright"><a href="https://tw.tradingview.com/symbols/OTC-FITX/"
                            rel="noopener" target="_blank"><span class="blue-text">FITX 圖表</span></a>由TradingView提供
                    </div>
                    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                    <script type="text/javascript">
                        new TradingView.widget(
                            {
                                "width": 800,
                                "height": 510,
                                "symbol": "OTC:FITX",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "light",
                                "style": "1",
                                "locale": "zh_TW",
                                "toolbar_bg": "#f1f3f6",
                                "enable_publishing": false,
                                "allow_symbol_change": true,
                                "container_id": "tradingview_390a9"
                            }
                        );
                    </script>
                </div>
                <!-- TradingView Widget END -->
            </li>
            <script type="text/javascript">
                $(function () {
                    $("select").on("change", function () {
                        console.log($(this).val());
                        switch ($(this).val()) {
                            case "1": // 介面1
                                $(".trade_set_content .a1").css("display", "block");
                                $(".trade_set_content .a2").css("display", "none");
                                break;
                            case "2": // 介面2
                                $(".trade_set_content  .a2").css("display", "block");
                                $(".trade_set_content  .a1").css("display", "none");
                                break;
                            default:
                                $(".trade_set_content  .a1").css("display", "none");
                                $(".trade_set_content  .a2").css("display", "none");
                                break;
                        }
                    });
                });
            </script>
        </ul>
    </div>
</div>
<!-- 停損停利 -->
<script type="text/javascript">
    $(function () {
    $("select").on("change", function () {
    console.log($(this).val());
    switch ($(this).val()) {
    case "1": // 介面1
    $(".stop-content .b1").addClass("active");
    $(".stop-content .b2").removeClass('active');
    $(".stop-content .b3").removeClass('active');
    break;
    case "2": // 介面2
    $(".stop-content .b2").addClass("active");
    $(".stop-content .b1").removeClass('active');
    $(".stop-content .b3").removeClass('active');
    break;
    case "3": // 介面3
    $(".stop-content .b3").addClass("active");
    $(".stop-content .b1").removeClass('active');
    $(".stop-content .b2").removeClass('active');
    break;
    default:
    $(".stop-content .b1").removeClass('active');
    $(".stop-content .b2").removeClass('active');
    $(".stop-content .b3").removeClass('active');
    break;
    }
    });
    });
</script>
<!-- 進出場策略 -->
<script>
var colleges=['做多','做空'];
var inner="";
for(var i=0;i<colleges.length;i++){
    inner+=`<option value=i>${colleges[i]}</option>`;
}
$("#list1").html(inner);//寫入
var noIndex;//第二層的index

//選擇第一層後，產出第二層（進場）
var sectors=new Array();
var sectorsValue = new Array();
//多
sectors[0]=['MA快線向上突破慢線','OSC值向上突破0','RSI>50','K值向上突破D值','乖離率<0.001','威廉指標從-80反彈'];
//空
sectors[1]=['MA快線向下跌破慢線','OSC值向下跌破0','RSI<50','K值向下跌破D值','乖離率>0.001','威廉指標從-20回落'];	

sectorsValue=['MA','OSC','Rsi','K','Bias','Will']

$("#list1").change(function(){
    index=this.selectedIndex;//第一層的index
    noIndex =index;
    console.log('no1',this.selectedIndex);
    console.log('第二層的長度',sectors[index].length);//第二層的長度
    console.log('第二層選擇的陣列',sectors[index]);//第二層選擇的陣列
    var Sinner="";
    for(var i=0;i<sectors[index].length;i++){
    // Sinner=Sinner+'<option value=i>'+sectors[index][i]+'</option>';
    Sinner=Sinner+'<option value='+sectorsValue[i]+'>'+sectors[index][i]+'</option>';
}
$("#list2").html(Sinner);

// 第三層（出場）
var sectorss=new Array();
var sectorssValue = new Array();
// 多
sectorss[0]=['MA快線向上突破慢線','OSC值向上突破0','RSI>50','K值向上突破D值','乖離率<0.001','威廉指標從-80反彈']; 
// 空
sectorss[1]=['MA快線向下跌破慢線','OSC值向下跌破0','RSI<50','K值向下跌破D值','乖離率>0.001','威廉指標從-20回落'];	

// 多
sectorss[0][0]=['MA慢線追過快線','RSI<30或RSI>80','K值向下跌破D值','正乖離率過大並回落特定界線','威廉指標從上界值回落'];
sectorss[0][1]=['MA慢線追過快線','RSI<30或RSI>80','K值向下跌破D值','正乖離率過大並回落特定界線','威廉指標從上界值回落'];
sectorss[0][2]=['MA慢線追過快線','RSI<30或RSI>80','K值向下跌破D值','正乖離率過大並回落特定界線','威廉指標從上界值回落'];
sectorss[0][4]=['MA慢線追過快線','RSI<30或RSI>80','K值向下跌破D值','正乖離率過大並回落特定界線','威廉指標從上界值回落'];
sectorss[0][5]=['MA慢線追過快線','RSI<30或RSI>80','K值向下跌破D值','正乖離率過大並回落特定界線','威廉指標從上界值回落'];
sectorss[0][6]=['MA慢線追過快線','RSI<30或RSI>80','K值向下跌破D值','正乖離率過大並回落特定界線','威廉指標從上界值回落'];

// 空
sectorss[1][0]=['MA慢線追過快線','RSI<20或RSI>70','K值向上突破D值','負乖離率過大並回落特定界線','威廉指標從下界值回落'];
sectorss[1][1]=['MA慢線追過快線','RSI<20或RSI>70','K值向上突破D值','負乖離率過大並回落特定界線','威廉指標從下界值回落'];
sectorss[1][2]=['MA慢線追過快線','RSI<20或RSI>70','K值向上突破D值','負乖離率過大並回落特定界線','威廉指標從下界值回落'];
sectorss[1][3]=['MA慢線追過快線','RSI<20或RSI>70','K值向上突破D值','負乖離率過大並回落特定界線','威廉指標從下界值回落'];
sectorss[1][4]=['MA慢線追過快線','RSI<20或RSI>70','K值向上突破D值','負乖離率過大並回落特定界線','威廉指標從下界值回落'];
sectorss[1][5]=['MA慢線追過快線','RSI<20或RSI>70','K值向上突破D值','負乖離率過大並回落特定界線','威廉指標從下界值回落'];
sectorss[1][6]=['MA慢線追過快線','RSI<20或RSI>70','K值向上突破D值','負乖離率過大並回落特定界線','威廉指標從下界值回落'];

sectorssValue = ['MA','Rsi','K','Bias','Will']

console.log(sectorss);

$("#list2").change(function(){
    index=this.selectedIndex;
    console.log('no2',this.selectedIndex);
    var Sinner3="";
    console.log('0000',sectorss[noIndex]);
    for(var i=0;i<sectorss[noIndex][index].length;i++){
        // console.log(i)
        console.log(sectorss[noIndex][index][i])

        Sinner3=Sinner3+'<option value='+sectorssValue[i]+'>'+sectorss[noIndex][index][i]+'</option>';
    }
    $("#list3").html(Sinner3);
});

$("#list2").change();
});
$("#list1").change();
</script>
{% endblock %}